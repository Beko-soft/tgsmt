<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBJ ve MTL GÃ¶rÃ¼ntÃ¼leyici</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>

<script>
    // --- 1. Temel Kurulum ---

    const scene = new THREE.Scene();

    // KamerayÄ± tanÄ±mlama.
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);

    // Renderer kurulumu
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Arka plan rengini hafif gri yapalÄ±m
    renderer.setClearColor(0xAAAAAA, 1);

    // --- 2. Kontroller ve Pozisyon ---

    // OrbitControls ile model etrafÄ±nda gezinebilme Ã¶zelliÄŸi
    const controls = new THREE.OrbitControls(camera, renderer.domElement);

    // BaÅŸlangÄ±Ã§ Kamera Pozisyonu: Modelin etrafÄ±nÄ± gÃ¶rebilmek iÃ§in kamerayÄ± geriye Ã§ekiyoruz.
    camera.position.set(0, 0, 1500);
    controls.update();

    // --- 3. IÅŸÄ±klandÄ±rma ---

    // Modeli aydÄ±nlatmak iÃ§in yumuÅŸak genel Ä±ÅŸÄ±k
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
    scene.add(ambientLight);

    // YÃ¶nlÃ¼ Ä±ÅŸÄ±k ile gÃ¶lge ve detay ekleme
    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
    directionalLight.position.set(500, 500, 500);
    scene.add(directionalLight);

    // --- 4. OBJ ve MTL Modelini YÃ¼kleme ---

    const mtlLoader = new THREE.MTLLoader();
    const objLoader = new THREE.OBJLoader();

    const objPath = 'dosya.obj';
    const mtlPath = 'dosya.mtl';

    // Ã–nce Malzemeyi (MTL) YÃ¼kle (Doku ve Renkler iÃ§in)
    mtlLoader.load(mtlPath, function(materials) {

        materials.preload();

        // OBJ yÃ¼kleyicisine malzemeleri ata
        objLoader.setMaterials(materials);

        // Malzemeler hazÄ±r, ÅŸimdi OBJ dosyasÄ±nÄ± yÃ¼kle
        objLoader.load(
            objPath,
            function (object) {
                // Obje baÅŸarÄ±lÄ± bir ÅŸekilde yÃ¼klendi
                scene.add(object);
                console.log('âœ… OBJ Model ve Malzeme baÅŸarÄ±yla sahneye eklendi:', objPath);

                // KameranÄ±n modelin merkezine odaklanmasÄ±nÄ± saÄŸla
                controls.target.set(0, 0, 0);
                controls.update();
            },
            // Ä°lerleme Durumu
            function (xhr) {
                console.log('OBJ:', (xhr.loaded / xhr.total * 100).toFixed(2) + '% yÃ¼klendi');
            },
            // Hata Durumu (OBJ YÃ¼kleme)
            function (error) {
                console.error('ğŸš¨ KRÄ°TÄ°K HATA! OBJ YÃ¼klenirken veya AyrÄ±ÅŸtÄ±rÄ±lÄ±rken Hata OluÅŸtu:', error);
                alert('Hata! OBJ Model YÃ¼klenemedi. Dosya adÄ±nÄ± ve konsolu kontrol edin.');
            }
        );
    },
    // MTL YÃ¼kleme Hata Yakalama
    function(error) {
        console.warn('âš ï¸ MTL Malzeme DosyasÄ± YÃ¼klenemedi. Model renksiz yÃ¼klenecek.', error);

        // EÄŸer MTL yÃ¼klenemezse, OBJ'yi malzemesiz yÃ¼kle
        objLoader.load(
            objPath,
            function (object) {
                scene.add(object);
                console.log('âœ… OBJ Model renksiz olarak sahneye eklendi.');
            },
            // ... (Ä°lerleme ve OBJ hata fonksiyonlarÄ± yukarÄ±daki gibi devam eder)
            function (error) {
                console.error('ğŸš¨ KRÄ°TÄ°K HATA! OBJ YÃ¼klenirken veya AyrÄ±ÅŸtÄ±rÄ±lÄ±rken Hata OluÅŸtu:', error);
            }
        );
    });

    // --- 5. Animasyon DÃ¶ngÃ¼sÃ¼ ---

    function animate() {
        requestAnimationFrame(animate);
        // Kontrolleri sÃ¼rekli gÃ¼ncelle
        controls.update();
        renderer.render(scene, camera);
    }
    animate();

    // --- 6. Pencere Boyut DeÄŸiÅŸikliÄŸi ---

    window.addEventListener('resize', onWindowResize, false);

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }

</script>
</body>
</html>
